<!DOCTYPE html>
<html
  lang="en"
  class="color-toggle-hidden"
  
>
  <head>
    <meta charset="UTF-8" />
<meta name="referrer" content="no-referrer" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="color-scheme" content="light dark" />
<meta name="generator" content="Hugo 0.92.2" />


  <meta name="description" content="Migrating a monolith application into microservices with single sign on     Page navigation:
 General Discussion Facing the problems of an application migration path The Demo-Project used for this documentation Configuring Uitsmijter checkcredentials Proxy Service Changes that need to be made You have made it!  General Discussion     The Path to Microservices: A Journey of Innovation and Empowerment     In today&rsquo;s fast-paced tech landscape, companies are continually seeking innovative ways to stay competitive and meet evolving customer demands." />

    <title>Migrating a monolith | Uitsmijter Documentation</title>

    <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico" />

    

    
  <meta
    property="og:title"
    content="Migrating a monolith"
  />
  <meta property="og:site_name" content="Uitsmijter Documentation" />
  <meta property="og:description" content="Migrating a monolith application into microservices with single sign on     Page navigation:
 General Discussion Facing the problems of an application migration path The Demo-Project used for this documentation Configuring Uitsmijter checkcredentials Proxy Service Changes that need to be made You have made it!  General Discussion     The Path to Microservices: A Journey of Innovation and Empowerment     In today’s fast-paced tech landscape, companies are continually seeking innovative ways to stay competitive and meet evolving customer demands." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://docs.uitsmijter.io/interceptor/migrating_monolith/" />

<meta property="article:section" content="Interceptor" />


  <meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Migrating a monolith" />
  <meta name="twitter:description" content="Migrating a monolith application into microservices with single sign on     Page navigation:
 General Discussion Facing the problems of an application migration path The Demo-Project used for this documentation Configuring Uitsmijter checkcredentials Proxy Service Changes that need to be made You have made it!  General Discussion     The Path to Microservices: A Journey of Innovation and Empowerment     In today’s fast-paced tech landscape, companies are continually seeking innovative ways to stay competitive and meet evolving customer demands." />


  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "TechArticle",
      "articleSection": "Interceptor",
      "name": "Migrating a monolith",
      "url" : "https://docs.uitsmijter.io/interceptor/migrating_monolith/",
      "headline": "Migrating a monolith",
      "description": "Migrating a monolith application into microservices with single sign on     Page navigation:\n General Discussion Facing the problems of an application migration path The Demo-Project used for this documentation Configuring Uitsmijter checkcredentials Proxy Service Changes that need to be made You have made it!  General Discussion     The Path to Microservices: A Journey of Innovation and Empowerment     In today’s fast-paced tech landscape, companies are continually seeking innovative ways to stay competitive and meet evolving customer demands.",
      "wordCount" : "4091",
      "inLanguage": "en",
      "isFamilyFriendly": "true",
      "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://docs.uitsmijter.io/interceptor/migrating_monolith/"
      },
      "copyrightHolder" : "Uitsmijter Documentation",
      "copyrightYear" : "0001",
      "dateCreated": "0001-01-01T00:00:00.00Z",
      "datePublished": "0001-01-01T00:00:00.00Z",
      "dateModified": "0001-01-01T00:00:00.00Z",
      "publisher":{
          "@type":"Organization",
          "name": "Uitsmijter Documentation",
          "url": "https://docs.uitsmijter.io/",
          "logo": {
              "@type": "ImageObject",
              "url": "https://docs.uitsmijter.io/uitsmijter-docs-horizontal-color.svg",
              "width":"32",
              "height":"32"
          }
      }
  }
  </script>


    
  <script src="/js/colortheme-d3e4d351.bundle.min.js"></script>
<script src="/js/main-56ca818c.bundle.min.js"></script>

<link
  rel="preload"
  href="/main.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/main.css"
  media="all"
/>

<link
  rel="preload"
  href="/mobile.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/mobile.css"
  media="screen and (max-width: 45rem)"
/>

<link
  rel="preload"
  href="/print.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/print.css"
  media="print"
/>

<link
  rel="preload"
  href="/custom.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/custom.css"
  media="all"
/>
  <link href="https://docs.uitsmijter.io/interceptor/migrating_monolith/" rel="canonical" type="text/html" />

<!-- Made with Geekdoc theme https://github.com/thegeeklab/hugo-geekdoc -->

    

<script>
  var _paq = window._paq = window._paq || [];
   
  _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.muppets.ausdertechnik.de/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>

  </head>

  <body itemscope itemtype="https://schema.org/WebPage">
    
  <!-- geekdoc include: sprites/geekdoc.svg -->
  <svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427 0 .808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868 0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733 0h10.876q.868 0 1.532.664t.664 1.532v17.412z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51 0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check" xmlns="http://www.w3.org/2000/svg"><path d="M8.885 20.197 25.759 3.323l2.24 2.24L8.885 24.677 0 15.792l2.24-2.24z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check_circle_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm6.441 7.822 1.972 1.972-11.239 11.239L4.207 14l1.972-1.972 4.995 4.995z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914 0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898 0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063 0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531 0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953 0 5.496 2.078t3.09 4.977z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75 0 1 0-3.501.001 1.75 1.75 0 0 0 3.501-.001zm0-21a1.75 1.75 0 1 0-3.501.001A1.75 1.75 0 0 0 9.917 3.5zm11.666 2.333a1.75 1.75 0 1 0-3.501.001 1.75 1.75 0 0 0 3.501-.001zm1.75 0a3.502 3.502 0 0 1-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502 0 0 1 1.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502 0 0 1 4.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502 0 0 1-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502 0 0 1-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_copy" xmlns="http://www.w3.org/2000/svg"><path d="M23.502 25.438V7.626H9.562v17.812h13.94zm0-20.315q1.013 0 1.787.745t.774 1.757v17.812q0 1.013-.774 1.787t-1.787.774H9.562q-1.013 0-1.787-.774t-.774-1.787V7.625q0-1.013.774-1.757t1.787-.745h13.94zM19.689 0v2.562H4.438v17.812H1.936V2.562q0-1.013.745-1.787T4.438.001h15.251z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_dangerous" xmlns="http://www.w3.org/2000/svg"><path d="M21.802 19.833 15.969 14l5.833-5.833-1.969-1.969L14 12.031 8.167 6.198 6.198 8.167 12.031 14l-5.833 5.833 1.969 1.969L14 15.969l5.833 5.833zM19.833 0 28 8.167v11.666L19.833 28H8.167L0 19.833V8.167L8.167 0h11.666z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277 0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352 0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46 0v3.155h-3.155v-3.155h3.155zm-6.384 0v3.155h-3.23v-3.155h3.23z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277 0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277 0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_error_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 6.967h2.761v8.413H12.62V6.967zm0 11.239h2.761v2.826H12.62v-2.826z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_fire" xmlns="http://www.w3.org/2000/svg"><path d="M17.689 21.998q-.32.32-.8.576t-.864.384q-1.152.384-2.272.032t-1.888-.992q-.128-.128-.096-.256t.16-.192q1.216-.384 1.92-1.216t.96-1.792q.192-.896-.064-1.728t-.384-1.728q-.128-.704-.096-1.376t.288-1.312q0-.128.128-.128t.192.064q.384.832.992 1.472t1.28 1.216 1.216 1.248.672 1.568q.064.384.064.704.064.96-.32 1.92t-1.088 1.536zm3.84-10.944q-.768-.704-1.6-1.28t-1.6-1.344q-1.536-1.536-2.016-3.584t.16-4.16q.128-.32-.096-.544t-.544-.096q-.768.32-1.44.768t-1.312.896q-1.984 1.664-3.136 3.936T8.633 10.51t.8 5.088q0 .128.032.256t.032.256q0 .576-.512.832t-1.024-.192q-.128-.192-.192-.32-1.024-1.28-1.376-2.912t-.096-3.232q.064-.384-.288-.576t-.608.128q-1.28 1.664-1.856 3.68t-.448 4.064q0 .576.096 1.184t.288 1.184q.448 1.536 1.216 2.816 1.216 2.048 3.264 3.424t4.416 1.696q2.496.32 5.024-.256t4.448-2.304q1.408-1.344 2.208-3.104t.864-3.68-.704-3.712q-.064-.128-.096-.224t-.096-.224q-.576-1.088-1.28-1.984-.256-.384-.544-.704t-.672-.64z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753 15.247.529a1.803 1.803 0 0 0-2.55 0l-2.84 2.84 2.137 2.137a2.625 2.625 0 0 1 3.501 3.501l3.499 3.499a2.625 2.625 0 1 1-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626 0 1 1-1.75 0v-7.3a2.626 2.626 0 0 1-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805 0 0 0 0 2.551l12.225 12.224a1.803 1.803 0 0 0 2.55 0l12.168-12.168a1.805 1.805 0 0 0 0-2.551z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_gitea" xmlns="http://www.w3.org/2000/svg"><path d="M5.581 7.229c-2.46-.005-5.755 1.559-5.573 5.48.284 6.125 6.56 6.693 9.068 6.743.275 1.149 3.227 5.112 5.412 5.32h9.573c5.741-.381 10.04-17.363 6.853-17.427-5.271.248-8.395.373-11.073.395v5.3l-.835-.369-.005-4.928c-3.075-.001-5.781-.144-10.919-.397-.643-.004-1.539-.113-2.501-.116zm.348 2.166h.293c.349 3.14.917 4.976 2.067 7.781-2.933-.347-5.429-1.199-5.888-4.38-.237-1.647.563-3.365 3.528-3.401zm11.409 3.087c.2.003.404.04.596.128l.999.431-.716 1.305h-.007a.996.996 0 0 0-.321.053l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006a.767.767 0 0 0 .151.233l-.001-.001-1.235 2.248a.99.99 0 0 0-.302.052l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987 0 0 0 .31-.049l-.006.002c.348-.114.592-.406.592-.749 0-.097-.02-.19-.056-.277l.002.006a.784.784 0 0 0-.211-.293l1.203-2.189a.999.999 0 0 0 .397-.041l-.006.002a.942.942 0 0 0 .285-.15l-.001.001c.464.195.844.353 1.117.488.411.203.556.337.6.487.044.147-.004.429-.236.925-.173.369-.46.893-.799 1.511h-.02a.991.991 0 0 0-.321.053l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987 0 0 0 .31-.049l-.006.002c.348-.114.592-.406.592-.749a.703.703 0 0 0-.055-.275l.002.006a.802.802 0 0 0-.183-.27l.001.001c.335-.611.623-1.136.808-1.531.251-.536.381-.935.267-1.32s-.467-.636-.933-.867c-.307-.151-.689-.311-1.147-.503a.723.723 0 0 0-.052-.324l.002.006a.792.792 0 0 0-.194-.279l.704-1.284 3.899 1.684c.704.305.995 1.053.653 1.68l-2.68 4.907c-.343.625-1.184.884-1.888.58l-5.516-2.384c-.704-.304-.996-1.053-.653-1.68l2.68-4.905c.235-.431.707-.687 1.207-.707z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833 0 15.999 7.166 15.999 15.999 0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771 0-.521.021-2.25.021-4.396 0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896 0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032 0 0 0-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291 0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896 0 1.333.021 2.583.021 2.979 0 .417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25 0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229 0 .375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354 0 .396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187 0-.333.104-.333.229 0 .146.146.25.354.229.187 0 .333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034 14 26.888.442 17.048a1.09 1.09 0 0 1-.39-1.203l1.578-4.811zm7.217 0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548 0 0 1 1.031 0zm20.618 9.559 1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548 0 0 1 1.031 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11 0 0 1-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125 0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339 0 8.535 3.125 8.535 8.357 0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_home" xmlns="http://www.w3.org/2000/svg"><path d="M24.003 15.695v8.336c0 .608-.504 1.111-1.111 1.111h-6.669v-6.669h-4.446v6.669H5.108a1.119 1.119 0 0 1-1.111-1.111v-8.336c0-.035.017-.069.017-.104L14 7.359l9.986 8.232a.224.224 0 0 1 .017.104zm3.873-1.198-1.077 1.285a.578.578 0 0 1-.365.191h-.052a.547.547 0 0 1-.365-.122L14 5.831 1.983 15.851a.594.594 0 0 1-.417.122.578.578 0 0 1-.365-.191L.124 14.497a.57.57 0 0 1 .069-.781L12.679 3.314c.729-.608 1.91-.608 2.64 0l4.237 3.543V3.471c0-.313.243-.556.556-.556h3.334c.313 0 .556.243.556.556v7.085l3.803 3.161c.226.191.26.556.069.781z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_info_outline" xmlns="http://www.w3.org/2000/svg"><path d="M12.62 9.793V6.967h2.761v2.826H12.62zM14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 21.033V12.62h2.761v8.413H12.62z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36 14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25 22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25 18.375 16 6.125 3.75 9.875 0l15.999 15.999L9.875 31.998z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_up" xmlns="http://www.w3.org/2000/svg"><path d="M24.719 22.64 14 11.921 3.281 22.64 0 19.359l14-14 14 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_language" xmlns="http://www.w3.org/2000/svg"><path d="M20.112 16.826h4.732q.394-1.84.394-2.826t-.394-2.826h-4.732q.197 1.38.197 2.826t-.197 2.826zm-2.497 7.756q1.643-.526 3.418-2.005t2.695-2.991h-4.141q-.657 2.629-1.972 4.995zm-.329-7.756q.197-1.38.197-2.826t-.197-2.826h-6.573q-.197 1.38-.197 2.826t.197 2.826h6.573zM14 25.173q1.84-2.695 2.695-5.587h-5.39q.854 2.892 2.695 5.587zM8.413 8.413q.789-2.826 1.972-4.995-1.643.526-3.451 2.005T4.272 8.414h4.141zM4.272 19.587q.854 1.512 2.662 2.991t3.451 2.005q-1.315-2.366-1.972-4.995H4.272zm-1.117-2.761h4.732Q7.69 15.446 7.69 14t.197-2.826H3.155q-.394 1.84-.394 2.826t.394 2.826zM14 2.826q-1.84 2.695-2.695 5.587h5.39Q15.841 5.521 14 2.826zm9.727 5.587q-.92-1.512-2.695-2.991t-3.418-2.005q1.183 2.169 1.972 4.995h4.141zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305 0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305 0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_mastodon" xmlns="http://www.w3.org/2000/svg"><path d="M30.924 10.506c0-6.941-4.548-8.976-4.548-8.976C24.083.477 20.144.034 16.054.001h-.101C11.862.034 7.926.477 5.633 1.53c0 0-4.548 2.035-4.548 8.976 0 1.589-.031 3.491.02 5.505.165 6.79 1.245 13.479 7.522 15.14 2.893.765 5.379.927 7.38.816 3.629-.2 5.667-1.296 5.667-1.296l-.12-2.633s-2.593.817-5.505.719c-2.887-.099-5.932-.311-6.399-3.855a7.069 7.069 0 0 1-.064-.967v-.028.001s2.833.693 6.423.857c2.195.1 4.253-.129 6.344-.377 4.009-.479 7.5-2.949 7.939-5.207.689-3.553.633-8.676.633-8.676zm-5.366 8.945h-3.329v-8.159c0-1.72-.724-2.592-2.171-2.592-1.6 0-2.403 1.035-2.403 3.083v4.465h-3.311v-4.467c0-2.048-.803-3.083-2.403-3.083-1.447 0-2.171.873-2.171 2.592v8.159H6.441v-8.404c0-1.719.437-3.084 1.316-4.093.907-1.011 2.092-1.528 3.565-1.528 1.704 0 2.995.655 3.848 1.965l.828 1.391.829-1.391c.853-1.311 2.144-1.965 3.848-1.965 1.472 0 2.659.517 3.565 1.528.877 1.009 1.315 2.375 1.315 4.093z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_matrix" xmlns="http://www.w3.org/2000/svg"><path d="M.843.734v30.532H3.04v.733H0V0h3.04v.733zm9.391 9.68v1.543h.044a4.417 4.417 0 0 1 1.489-1.365c.577-.327 1.248-.487 2-.487.72 0 1.377.143 1.975.419.597.277 1.047.776 1.36 1.477.339-.499.8-.941 1.379-1.323.579-.383 1.267-.573 2.061-.573.604 0 1.163.075 1.68.223a3.34 3.34 0 0 1 1.324.707c.368.327.652.745.861 1.268.203.523.307 1.151.307 1.889v7.637h-3.132v-6.468c0-.381-.013-.745-.043-1.083a2.315 2.315 0 0 0-.246-.893l.006.013a1.484 1.484 0 0 0-.577-.593l-.007-.004c-.259-.147-.609-.221-1.047-.221-.443 0-.8.085-1.071.252-.267.166-.483.39-.635.656l-.005.009a2.558 2.558 0 0 0-.307.915l-.002.013a7.156 7.156 0 0 0-.08 1.044v6.359h-3.133v-6.4c0-.339-.005-.671-.024-1.003a2.772 2.772 0 0 0-.197-.936l.007.019a1.41 1.41 0 0 0-.548-.667l-.006-.003c-.259-.167-.635-.253-1.139-.253-.148 0-.345.032-.585.099-.24.068-.48.191-.707.376-.228.184-.425.449-.585.793-.16.345-.24.8-.24 1.36v6.621H7.279v-11.42zm20.923 20.852V.734H28.96V.001H32V32h-3.04v-.733z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_notification" xmlns="http://www.w3.org/2000/svg"><path d="m22.615 19.384 2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999 0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211 0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052 0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275 0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432 0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981 0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976 0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863 0 3.501 0H24.5c.638 0 1.167.529 1.167 1.167z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_star" xmlns="http://www.w3.org/2000/svg"><path d="M14 22.052 5.324 27.31l2.3-9.859L0 10.813l10.056-.854L14 .692l3.944 9.267L28 10.813l-7.624 6.638 2.3 9.859z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_tag" xmlns="http://www.w3.org/2000/svg"><path d="M17.52 17.52v-7.041h-7.041v7.041h7.041zM28 10.479h-7.041v7.041H28v3.439h-7.041V28H17.52v-7.041h-7.041V28H7.04v-7.041H-.001V17.52H7.04v-7.041H-.001V7.04H7.04V-.001h3.439V7.04h7.041V-.001h3.439V7.04H28v3.439z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_timer" xmlns="http://www.w3.org/2000/svg"><path d="M16 29q4.428 0 7.536-3.143t3.107-7.571-3.107-7.536T16 7.643 8.464 10.75t-3.107 7.536 3.107 7.571T16 29zM26.714 9.786q1.214 1.571 2.107 4.036t.893 4.464q0 5.643-4 9.678T16 32t-9.714-4.036-4-9.678 4-9.678T16 4.572q1.929 0 4.464.929t4.107 2.143l2.143-2.214q1.143.929 2.143 2.143zM14.5 19.857v-9.143h3v9.143h-3zM20.571.001v3.071h-9.143V.001h9.143z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_xmpp" xmlns="http://www.w3.org/2000/svg"><path d="M31.995 4.237c-.449.175-1.12.433-1.936.745-1.544.591-2.328.891-2.924 1.093-.613.208-1.287.409-2.635.813-.911.272-1.672.495-2.212.651-.031.875 0 2.177-.292 3.635a21.837 21.837 0 0 1-2.016 5.765c-1.496 2.944-3.236 4.817-3.88 5.476-.056-.059-.112-.117-.168-.179-.707-.763-2.403-2.703-3.815-5.683-1.053-2.223-1.484-4.044-1.605-4.584-.356-1.589-.427-2.955-.427-4.117 0-.075-.036-.129-.101-.149-.721-.223-1.765-.519-2.887-.853-1.271-.379-2.193-.744-3.408-1.2-.493-.185-1.409-.547-2.217-.859C.723 4.499.113 4.236.041 4.236c-.005 0-.015 0-.023.012a.131.131 0 0 0-.019.076c.009.593.08 1.361.256 2.365.615 3.503 2.688 7.061 4.36 9.244 0 0 3.717 5.035 9.128 8.144l.303.176c-.009.008-.02.015-.028.021-1.717 1.316-3.201 1.977-3.579 2.14a15.71 15.71 0 0 1-2.219.772v.407a25.31 25.31 0 0 0 2.72-.487 26.72 26.72 0 0 0 5.075-1.792c.136.067.276.136.42.204 1.527.725 3.571 1.627 6.073 2.048.613.103 1.136.165 1.507.195a.109.109 0 0 0 .115-.091.55.55 0 0 0 .004-.217.107.107 0 0 0-.063-.073c-.505-.209-1.201-.4-1.983-.719-.935-.381-2.241-1.067-3.648-2.128a13.528 13.528 0 0 1-.367-.287c4.64-2.656 7.989-6.588 7.989-6.588 1.735-2.036 4.441-5.623 5.431-9.795.349-1.473.539-2.741.5-3.628z"/></svg></defs></svg>




    <div
      class="wrapper "
    >
      <input type="checkbox" class="hidden" id="menu-control" />
      <input type="checkbox" class="hidden" id="menu-header-control" />
      
      <header class="gdoc-header">
  <div class="container flex align-center justify-between">
    
      <label for="menu-control" class="gdoc-nav__control" tabindex="0">
        <svg class="gdoc-icon gdoc_menu">
          <title>Open Navigation</title>
          <use xlink:href="#gdoc_menu"></use>
        </svg>
        <svg class="gdoc-icon gdoc_arrow_back">
          <title>Close Navigation</title>
          <use xlink:href="#gdoc_arrow_back"></use>
        </svg>
      </label>
    
    <div>
      <a class="gdoc-brand gdoc-header__link" href="https://docs.uitsmijter.io/">
        <span class="flex align-center">
          <img
            class="gdoc-brand__img"
            src="/uitsmijter-docs-horizontal-color.svg"
            alt=""
          />
        </span>
      </a>
    </div>
    <div class="gdoc-menu-header">
      <span class="gdoc-menu-header__items">
        
        <span>
          <a href="https://github.com/uitsmijter/Uitsmijter" class="gdoc-header__link">
            <svg class="gdoc-icon gdoc_github">
              <title>GitHub</title>
              <use xlink:href="#gdoc_github"></use>
            </svg>
          </a>
        </span>

        <span id="gdoc-color-theme">
          <svg class="gdoc-icon gdoc_brightness_dark">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_dark"></use>
          </svg>
          <svg class="gdoc-icon gdoc_brightness_light">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_light"></use>
          </svg>
          <svg class="gdoc-icon gdoc_brightness_auto">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_auto"></use>
          </svg>
        </span>

        <span class="gdoc-menu-header__home">
          <a href="https://docs.uitsmijter.io/" class="gdoc-header__link">
            <svg class="gdoc-icon gdoc_home">
              <title>Back to homepage</title>
              <use xlink:href="#gdoc_home"></use>
            </svg>
          </a>
        </span>

        



        <span class="gdoc-menu-header__control">
          <label for="menu-header-control">
            <svg class="gdoc-icon gdoc_keyboard_arrow_right">
              <use xlink:href="#gdoc_keyboard_arrow_right"></use>
              <title>Close Menu Bar</title>
            </svg>
          </label>
        </span>
      </span>
      <label for="menu-header-control" class="gdoc-menu-header__control">
        <svg class="gdoc-icon gdoc_keyboard_arrow_left">
          <use xlink:href="#gdoc_keyboard_arrow_left"></use>
          <title>Open Menu Bar</title>
        </svg>
      </label>
    </div>
  </div>
</header>



      <main class="container flex flex-even">
        
          <aside class="gdoc-nav">
            <nav>
  
  <div class="gdoc-search flex align-center">
    <svg class="gdoc-icon gdoc_search"><use xlink:href="#gdoc_search"></use></svg>
    <input
      type="text"
      id="gdoc-search-input"
      class="gdoc-search__input"
      placeholder="Search..."
      aria-label="Search"
      maxlength="64"
      data-site-base-url="https://docs.uitsmijter.io/"
      data-site-lang="en"
    />
    <ul id="gdoc-search-results" class="gdoc-search__list"></ul>
  </div>




  <section class="gdoc-nav--main">
    <h2></h2>
    
      

  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/general/"
                    class="gdoc-nav__entry"
                  >
                    General
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/general/about/"
                    class="gdoc-nav__entry"
                  >
                    About
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/general/terminology/"
                    class="gdoc-nav__entry"
                  >
                    Terminology
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/general/motivation/"
                    class="gdoc-nav__entry"
                  >
                    Motivation
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/general/requirements/"
                    class="gdoc-nav__entry"
                  >
                    Requirements
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/general/quickstart/"
                    class="gdoc-nav__entry"
                  >
                    Quick Start Guide
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/configuration/"
                    class="gdoc-nav__entry"
                  >
                    Configuration
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/configuration/helm/"
                    class="gdoc-nav__entry"
                  >
                    Helm configuration
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/configuration/entities/"
                    class="gdoc-nav__entry"
                  >
                    Entities
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/configuration/tenant_client_config/"
                    class="gdoc-nav__entry"
                  >
                    Tenant and client configuration
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/configuration/logging/"
                    class="gdoc-nav__entry"
                  >
                    Logging
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/oauth/"
                    class="gdoc-nav__entry"
                  >
                    OAuth
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/oauth/flow/"
                    class="gdoc-nav__entry"
                  >
                    OAuth flow
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/oauth/granttypes/"
                    class="gdoc-nav__entry"
                  >
                    Grant Types
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/oauth/endpoints/"
                    class="gdoc-nav__entry"
                  >
                    Available Endpoints
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/oauth/jwt_decoding/"
                    class="gdoc-nav__entry"
                  >
                    JWT Decoding
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/oauth/pkce/"
                    class="gdoc-nav__entry"
                  >
                    PKCE
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/interceptor/"
                    class="gdoc-nav__entry"
                  >
                    Interceptor
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/interceptor/quickstart/"
                    class="gdoc-nav__entry"
                  >
                    Walkthrough guide
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/interceptor/interceptor/"
                    class="gdoc-nav__entry"
                  >
                    Interceptor Mode
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/interceptor/examples/"
                    class="gdoc-nav__entry"
                  >
                    Example Deployment
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/interceptor/migrating_monolith/"
                    class="gdoc-nav__entry is-active"
                  >
                    Migrating a monolith
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/providers/"
                    class="gdoc-nav__entry"
                  >
                    Providers
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/providers/providers/"
                    class="gdoc-nav__entry"
                  >
                    General provider information
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/providers/userloginprovider/"
                    class="gdoc-nav__entry"
                  >
                    User Login Provider
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/providers/uservalidationprovider/"
                    class="gdoc-nav__entry"
                  >
                    User Validation Provider
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/customisation/"
                    class="gdoc-nav__entry"
                  >
                    Customisation
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/customisation/template_login/"
                    class="gdoc-nav__entry"
                  >
                    Login Page
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/versions/"
                    class="gdoc-nav__entry"
                  >
                    Versions
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/versions/ee/installation/"
                    class="gdoc-nav__entry"
                  >
                    Enterprise Edition Installation
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/contribution/"
                    class="gdoc-nav__entry"
                  >
                    Contribution
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/contribution/development/"
                    class="gdoc-nav__entry"
                  >
                    Project information
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/contribution/tooling/"
                    class="gdoc-nav__entry"
                  >
                    Toolchain
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/contribution/guidelines/"
                    class="gdoc-nav__entry"
                  >
                    Development guidelines
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/contribution/goals/"
                    class="gdoc-nav__entry"
                  >
                    Overall Goals
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/contribution/faq/"
                    class="gdoc-nav__entry"
                  >
                    Frequently Asked Questions
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/contribution/certificate_of_origin/"
                    class="gdoc-nav__entry"
                  >
                    Developer Certificate of Origin
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/contribution/codeofconduct/"
                    class="gdoc-nav__entry"
                  >
                    Code of Conduct
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/contribution/3rdparty/"
                    class="gdoc-nav__entry"
                  >
                    3rd Party Tools
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">Resources</span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/resources/demopage/"
                    class="gdoc-nav__entry"
                  >
                    Index
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/licence/"
                    class="gdoc-nav__entry"
                  >
                    License
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>






    
  </section>

  


  <section class="gdoc-nav--more">
    
  </section>
</nav>

          </aside>
        


        <div class="gdoc-page">
          
  


  






<div
  class="gdoc-page__header flex flex-wrap
  
    justify-between
  
  hidden-mobile
  "
  itemprop="breadcrumb"
>
  
    <div>
      <svg class="gdoc-icon gdoc_path hidden-mobile"><use xlink:href="#gdoc_path"></use></svg>
      <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
        
        
        
        
  
  
    
    
    
    
  
  
    
    
    
    
  
  
    <li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/' href='/'><span itemprop='name'>Uitsmijter</span></a><meta itemprop='position' content='1' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/interceptor/' href='/interceptor/'><span itemprop='name'>Interceptor</span></a><meta itemprop='position' content='2' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><span itemprop='name'>Migrating a monolith</span><meta itemprop='position' content='3' /></li>
  

  

  

      </ol>
    </div>
  
  
</div>



  <article
    class="gdoc-markdown gdoc-markdown__align--left"
  >
    <div class="gdoc-page__anchorwrap">
    <h1 id="migrating-a-monolith-application-into-microservices-with-single-sign-on">
        Migrating a monolith application into microservices with single sign on
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#migrating-a-monolith-application-into-microservices-with-single-sign-on" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Migrating a monolith application into microservices with single sign on" aria-label="Anchor to: Migrating a monolith application into microservices with single sign on" href="#migrating-a-monolith-application-into-microservices-with-single-sign-on">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div>
<p>Page navigation:</p>
<ul>
<li><a
  class="gdoc-markdown__link"
  href="#general-discussion"
>General Discussion</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#facing-the-problems-of-an-application-migration-path"
>Facing the problems of an application migration path</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#the-demo-project-used-for-this-documentation"
>The Demo-Project used for this documentation</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#configuring-uitsmijter"
>Configuring Uitsmijter</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#checkcredentials-proxy-service"
>checkcredentials Proxy Service</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#changes-that-need-to-be-made"
>Changes that need to be made</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#you-have-made-it"
>You have made it!</a></li>
</ul>
<div class="gdoc-page__anchorwrap">
    <h2 id="general-discussion">
        General Discussion
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#general-discussion" class="gdoc-page__anchor clip flex align-center" title="Anchor to: General Discussion" aria-label="Anchor to: General Discussion" href="#general-discussion">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<div class="gdoc-page__anchorwrap">
    <h3 id="the-path-to-microservices-a-journey-of-innovation-and-empowerment">
        The Path to Microservices: A Journey of Innovation and Empowerment
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#the-path-to-microservices-a-journey-of-innovation-and-empowerment" class="gdoc-page__anchor clip flex align-center" title="Anchor to: The Path to Microservices: A Journey of Innovation and Empowerment" aria-label="Anchor to: The Path to Microservices: A Journey of Innovation and Empowerment" href="#the-path-to-microservices-a-journey-of-innovation-and-empowerment">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>In today&rsquo;s fast-paced tech landscape, companies are continually seeking innovative ways to stay competitive and meet
evolving customer demands. One of the most profound shifts capturing the attention of forward-thinking organizations is
the transition from monolithic applications to microservices architecture transformation that revolutionizes the very
core of software development, deployment, and maintenance, offering compelling reasons to embrace the future.</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="scaling-to-new-heights">
        Scaling to New Heights
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#scaling-to-new-heights" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Scaling to New Heights" aria-label="Anchor to: Scaling to New Heights" href="#scaling-to-new-heights">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>A driving force behind the widespread adoption of microservices lies in the promise of enhanced scalability and
performance. Traditional monolithic architectures treat applications as unwieldy monoliths, making it challenging to
scale specific components independently. The inefficiency of this approach often results in over-provisioning and wasted
resources. Microservices, however, introduce a level of granularity that empowers organizations to scale individual
services in response to demand. It&rsquo;s akin to a finely tuned symphony, where each instrument plays its part precisely,
optimizing resource allocation and, consequently, enhancing overall performance. The outcome is that applications
gracefully handle increased workloads and unforeseen traffic surges while delivering a superior user experience.</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="unleashing-flexibility-and-agility-in-development">
        Unleashing Flexibility and Agility in Development
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#unleashing-flexibility-and-agility-in-development" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Unleashing Flexibility and Agility in Development" aria-label="Anchor to: Unleashing Flexibility and Agility in Development" href="#unleashing-flexibility-and-agility-in-development">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>The shift towards microservices isn&rsquo;t solely about infrastructure enhancement. It&rsquo;s a complete reimagining of how
software is developed. Microservices foster flexibility and agility by breaking down applications into smaller,
decoupled services. This modular approach empowers development teams to work independently on various services,
significantly reducing the bottlenecks associated with monolithic development. The ability to work in parallel
accelerates development cycles, resulting in a quicker time-to-market for new features and updates. Moreover,
microservices remain technology-agnostic, allowing organizations to select the best tools for each service. This
newfound agility harmonizes perfectly with DevOps practices, facilitating seamless automation and nurturing a culture of
continuous integration and continuous deployment (CI/CD). The outcome is a more nimble and responsive development
process, ultimately enhancing innovation and adaptability to ever-evolving business requirements.</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="the-transformation-of-processes-and-team-dynamics">
        The Transformation of Processes and Team Dynamics
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#the-transformation-of-processes-and-team-dynamics" class="gdoc-page__anchor clip flex align-center" title="Anchor to: The Transformation of Processes and Team Dynamics" aria-label="Anchor to: The Transformation of Processes and Team Dynamics" href="#the-transformation-of-processes-and-team-dynamics">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>Transitioning from a monolithic to a microservices architecture isn&rsquo;t just a technological evolution; it necessitates a
fundamental rethink of processes and team structures.</p>
<p>Microservices reorient development efforts. In this brave new world, individual teams take ownership of specific
services, overseeing everything from development and testing to deployment. This autonomy accelerates the development
cycle, enabling teams to operate independently and concurrently.</p>
<p>Cross-functional teams become the norm in a microservices-centric landscape. These teams, composed of developers,
testers, DevOps engineers, and even product managers, collaborate harmoniously to ensure the seamless operation of each
service. Communication takes center stage as teams define service boundaries, APIs, and standards. Emerging roles like
&ldquo;Service Owners&rdquo; emerge to oversee the health and performance of specific services, emphasizing a holistic approach.</p>
<p>However, this transformation isn&rsquo;t without its challenges—robust tools, processes, and cultural shifts are essential. As
organizations scale the number of services, managing growth while maintaining consistency becomes a delicate balancing
act. Nevertheless, for those prepared to embrace change and invest in the future, the rewards of agility, scalability,
and enhanced development processes are well within reach through the embrace of microservices architecture.</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="the-rise-of-data-mesh">
        The Rise of Data Mesh
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#the-rise-of-data-mesh" class="gdoc-page__anchor clip flex align-center" title="Anchor to: The Rise of Data Mesh" aria-label="Anchor to: The Rise of Data Mesh" href="#the-rise-of-data-mesh">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>Following the shift to microservices, the benefits became evident, and the reconfiguration of team structures into more
autonomous and self-reliant units became the new norm.</p>
<p>What microservices are to applications, Data Mesh is to data. It represents an innovative approach to managing and
scaling data within organizations, particularly within large-scale, complex data ecosystems. The Data Mesh concept
heralds a paradigm shift in data management, aiming to make data more accessible, reliable, and scalable across
different parts of an organization.</p>
<p>Data Mesh addresses the challenges organizations face when dealing with vast and intricate data environments. It seeks
to dismantle data silos, elevate data quality, and empower domain-specific teams to independently manage and harness
their data assets.</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="the-role-of-authorization">
        The Role of Authorization
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#the-role-of-authorization" class="gdoc-page__anchor clip flex align-center" title="Anchor to: The Role of Authorization" aria-label="Anchor to: The Role of Authorization" href="#the-role-of-authorization">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>Returning to the concept of monolithic team structures, it&rsquo;s worth noting that in the past, many organizations employed
a centralized IT department responsible for managing all applications. This evolved into a more advanced DevOps team,
facilitating collaboration and communication between development (Dev) and operations (Ops) within the organization.
Their core objective: streamline the software delivery process, automate repetitive tasks, and cultivate a culture of
continuous integration and continuous delivery (CI/CD).</p>
<p>Yet, a fundamental perspective shift occurs when we consider the needs of individual teams taking ownership of specific
services. The traditional model, where a centralized DevOps team deploys software for the development team, may no
longer align with this new paradigm. The modern DevOps philosophy proposes a different approach: the DevOps team should
not be the entity responsible for deploying the software. Instead, their role should evolve into one that empowers other
teams by providing exceptional tools and robust support to enable autonomous software deployment.</p>
<p>Enter the Authorization Server a critical component in the realm of modern software applications, especially those
embracing microservices architecture. It assumes responsibility for managing and enforcing access controls, ensuring
that only authorized users or services access specific resources or data. In the context of DevOps and microservices,
the Authorization Server becomes an integral part of the security and access control framework.</p>
<p>By empowering individual teams to manage their deployments and access control policies, the DevOps team can collaborate
effectively with the Authorization Server team to ensure seamless integration of security and access control mechanisms.
This collaboration guarantees that as new services are independently deployed, they are also appropriately secured, and
access is managed consistently and reliably.</p>
<p>In essence, the Authorization Server, alongside the evolving DevOps philosophy, enables organizations to strike a
balance between agility and security. It ensures that the autonomy and empowerment of individual teams do not compromise
the integrity and confidentiality of sensitive data and resources. This progress advances an organization&rsquo;s journey
toward a more streamlined and efficient software delivery process.</p>
<p>This transition to greater autonomy is only feasible when service teams possess the ability to manage
application settings independently. This autonomy allows them to respond swiftly to changing requirements, configuring
clients and tenants to align with their specific use cases. This agility is pivotal for delivering features and updates
promptly, ensuring that security and access control remain robust and well-maintained.</p>
<p>As the tech landscape evolves, Uitsmijter steps in to fill the gap that modern, self-organized service teams
face—controlling the complete lifecycle of services and data while enforcing access management. Uitsmijter ensures that
users moving between different products developed by various service teams are controlled by the global ACLs that each
team commits to.</p>
<p>With Uitsmijter, teams gain the ability to deploy clients and/or tenants in their own namespace while enforcing global
security standards. This harmonious combination of autonomy and security empowers teams to take charge of their
development while maintaining the integrity and confidentiality of data and resources.</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="facing-the-problems-of-an-application-migration-path">
        Facing the problems of an application migration path
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#facing-the-problems-of-an-application-migration-path" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Facing the problems of an application migration path" aria-label="Anchor to: Facing the problems of an application migration path" href="#facing-the-problems-of-an-application-migration-path">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>Monolithic applications with their own login have one or more of the following factors in common:</p>
<ul>
<li>own, per application different kinds, of user authentication</li>
<li>user data is stored in the applications database</li>
<li>users usually have an internal ID, generated by the database (auto-increment)</li>
<li>With this ID further fields from other database tables are linked</li>
</ul>
<p>This results in the problem that removing the user authentication would entail a complete redesign of the application.
Moreover, many authentication systems demand the migration of user data to their dedicated user repositories, complete
with their unique sets of rights, roles, and profiles. These can be substantially different from the existing database
structures. When transitioning from an internal login system to OAuth, not only does the user handle change, but it also
triggers alterations within the internal structures of the application and impacts all database connections. However,
with Uitsmijter, these challenges can be circumvented. We will now explore a straightforward method for achieving this.</p>
<p>To enable the conversion of monolithic applications, which originally have their own login systems, to process an SSO
handle from external sources, users typically need to be migrated to an external system for most procedures.
Traditionally, this migration process involved several test runs, often conducted during batch processing at night,
especially when the implementation was not yet complete. Subsequently, the old application had to be entirely replaced
by the new implementation in a single significant transition (Big Bang). Unfortunately, this approach frequently
resulted in errors and application failures. However, with Uitsmijter, the transition of an application can be achieved
progressively and while it&rsquo;s in operation, all without any downtime. We&rsquo;ll delve into how this works shortly.</p>
<p>Previously, when monolithic applications shifted from custom login systems to OAuth, they had to grapple with the
complexities of OAuth in its entirety. This conversion was—and still is—a monumental task that consumes considerable
time and resources. However, we&rsquo;re about to unveil how Uitsmijter can simplify this process dramatically, making it an
ideal fit for modern, Sprint-based development methodologies.</p>
<p>When all these issues are combined (and so far, we&rsquo;ve only discussed user-related concerns), it leads to a prolonged,
perilous, and intricate migration process. Many companies hesitate to undertake this migration, thereby delaying their
transition to a microservices architecture—a change that could significantly boost productivity for the vast majority of
organizations. Uitsmijter offers a solution—a software and accompanying guides that make migration secure, well-planned,
agile, and, most importantly, enjoyable for developers and project owners. Its transparent and intelligent approach
makes it a standout choice for navigating the complexities of this transformation.</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="prepare-an-interceptor-first">
        Prepare an Interceptor first
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#prepare-an-interceptor-first" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Prepare an Interceptor first" aria-label="Anchor to: Prepare an Interceptor first" href="#prepare-an-interceptor-first">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div>
<p>The Interceptor mode of Uitsmijter is primarily designed to secure individual web pages behind a login. Many users
employ this mode to protect HTML pages (for instance, within an intranet or a closed client area) or to implement
metering and a paywall to monetize editorial content.</p>
<p>While the Interceptor mode is well-suited for these purposes, it possesses features that can significantly aid us in the
migration process and should not be underestimated in terms of its capabilities.</p>
<p>Internally, Uitsmijter employs the same mechanisms and externally presents two modes: OAuth and Interceptor. Internally,
it is essentially the same, and an application protected through an Interceptor can easily be secured with an OAuth
client. An application whose authentication is protected via the Interceptor mode can be enhanced by OAuth microservices
that also recognize the user (SSO). This is precisely what we aim to achieve during the migration process: initially, we
transition the monolith&rsquo;s login, allowing us to gradually extract individual parts of the application as microservices.</p>
<p>By following this approach, we can break down the entire migration into manageable units, modernizing the infrastructure
step by step. Moreover, with each iteration, we can continue to work on additional features. No Big Bang, no risks, no
downtime.</p>
<p>As described, the simple Interceptor mode is indeed the ideal initial step to authenticate users through Uitsmijter
before we proceed to externalize specific aspects.</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="the-demo-project-used-for-this-documentation">
        The Demo-Project used for this documentation
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#the-demo-project-used-for-this-documentation" class="gdoc-page__anchor clip flex align-center" title="Anchor to: The Demo-Project used for this documentation" aria-label="Anchor to: The Demo-Project used for this documentation" href="#the-demo-project-used-for-this-documentation">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>To keep things simple, we use an easy ToDo-App to explain what is needed to migrate from a monolith to a microservice
architecture with Uitsmijter.</p>
<p>The following simple database setup is given to demonstrate the migration:
things
<img
  src="/resources/todo-app/todo-app-db.png"
  alt="Monolith ToDo Application Database Diagram"
  title="Database Diagram"
/></p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Table</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>failed_jobs</td>
<td>Internal from the <a
  class="gdoc-markdown__link"
  href="https://laravel.com/"
>🔗Laravel framework</a> this legacy application is build upon. Queues in Laravel stores failed asynchronous job into the table.</td>
</tr>
<tr>
<td>migrations</td>
<td><a
  class="gdoc-markdown__link"
  href="https://laravel.com/"
>🔗 Laravel</a> provides database agnostic support for creating and manipulating tables across all supported database systems. The table stores the state of the database.</td>
</tr>
<tr>
<td>users</td>
<td>All users are stored in this table along a encrypted password and the email address of the user.</td>
</tr>
<tr>
<td>sessions</td>
<td>This application is a legacy monolith with its own user login. The active logins are stored in server sessions and be tracked in this database. <sub>1</sub></td>
</tr>
<tr>
<td>password_resets</td>
<td>Laravel provides convenient services for sending password reset links and secure resetting passwords.</td>
</tr>
<tr>
<td>todos</td>
<td>For demonstartion purpose the application handels todo actions that are stored in this table. A foreign key to the users table links the user who created the task.</td>
</tr>
</tbody>
</table> </div>
<blockquote>
<p>1: This tutorial assumes that your monolithic application runs already on <a
  class="gdoc-markdown__link"
  href="https://kubernetes.io"
>🔗 Kubernetes</a>. To
run multiple pods of the application be sure that sessions are stored in database or other shared storage and not on the filesystem.</p>
</blockquote>
<p>The application itself is very basic and a straight forward. It is a Laravel application written in PHP. You can find
and download the ToDo App on this <a
  class="gdoc-markdown__link"
  href="https://github.com/uitsmijter/example-todo-php-application"
>GitHub Repository</a>.</p>
<p>The application provides a simple login page. After a user successfully logs in, a list of tasks is displayed. Each task
has a description and the user who created this task is shown right beside the task. The authorised user can create new
tasks and mark others as completed.</p>
<p><strong>Admittedly, this is a very simple application, but it has an obvious problem that must be taken into account if the
logout is not going to be part of the application itself in the future: All tasks in the <code>todos</code> table are linked to the
users table. If the user table should be pulled out in the future, the link that is made with a foreign key must be
replaced by something else.</strong></p>
<p><strong>Another problem could be that when this todo-list should also be accessible via a mobile app, the session can&rsquo;t be
used
when it turns to a stateless server.</strong></p>
<p>Let&rsquo;s dive into the code and understand how the login is made:</p>
<p><code>AuthenticatedSessionController.php</code> have three methods:</p>
<ul>
<li><strong>create</strong>: This method is called by a GET request to /login. it displays the login page.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php">    <span class="k">public</span> <span class="k">function</span> <span class="nf">create</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;auth.login&#39;</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div><ul>
<li><strong>store</strong>:  Handle an incoming authentication request. by a POST request from the login form.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php">    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">LoginRequest</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">authenticate</span><span class="p">();</span>
        <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">session</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">regenerate</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">intended</span><span class="p">(</span><span class="nx">RouteServiceProvider</span><span class="o">::</span><span class="na">HOME</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div><p>First the <code>authenticate()</code> method is called to authenticate the user. The <code>authenticate</code> method in <code>LoginRequest.php</code>
checks the <code>email</code> and the <code>password</code> against the database. If this does not match, an error is returned.</p>
<p>The user session will be generated and at the end the request is redirected to the <code>HOME</code>, the page that shows the task
list.</p>
<ul>
<li><strong>destroy</strong>: Destroy an authenticated session when the user logout.</li>
</ul>
<p>The <code>TodoController.php</code> is as simple as the login controller:</p>
<ul>
<li><strong>store</strong>: Creates a new ToDo item</li>
<li><strong>update</strong>: Updates the provided ToDo task</li>
</ul>
<div class="gdoc-page__anchorwrap">
    <h2 id="configuring-uitsmijter">
        Configuring Uitsmijter
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#configuring-uitsmijter" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Configuring Uitsmijter" aria-label="Anchor to: Configuring Uitsmijter" href="#configuring-uitsmijter">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>To migrate this ToDo-Application to be used with a Single-Sign-On with Uitsmijter the first step is to create
a <a
  class="gdoc-markdown__link"
  href="/configuration/entities/#tenant"
>Tenant</a> with enabled <a
  class="gdoc-markdown__link"
  href="/interceptor/interceptor"
>interceptor</a> mode.</p>
<p>Create a Tenant:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;uitsmijter.io/v1&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Tenant</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Tasks</span><span class="w">
</span><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">todo-application</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">todo.example.com</span><span class="w">
</span><span class="w">  </span><span class="nt">interceptor</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">domain</span><span class="p">:</span><span class="w"> </span><span class="l">todo.example.com</span><span class="w">
</span><span class="w">    </span><span class="nt">cookie</span><span class="p">:</span><span class="w"> </span><span class="l">.example.com</span><span class="w">
</span><span class="w">  </span><span class="nt">providers</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="p">|</span><span class="sd">
</span><span class="sd">      class UserLoginProvider {
</span><span class="sd">        auth = false;
</span><span class="sd">        constructor(credentials) { this.auth = false; commit(this.auth); }
</span><span class="sd">        get canLogin() { return this.auth; }
</span><span class="sd">        get userProfile() { return { name: &#34;No User&#34; }; }
</span><span class="sd">        get role() { return &#34;user&#34;; }
</span><span class="sd">      }</span><span class="w">      
</span><span class="w">    </span>- <span class="p">|</span><span class="sd">
</span><span class="sd">      class UserValidationProvider {
</span><span class="sd">        valid = false;
</span><span class="sd">        constructor(args) { this.valid = false; commit(this.valid); }
</span><span class="sd">        get isValid() { return this.valid; }
</span><span class="sd">      }</span><span class="w">      
</span></code></pre></div><blockquote>
<p>All details for tenant configuration are bespoken
in <a
  class="gdoc-markdown__link"
  href="/configuration/tenant_client_config"
>Tenant and client configuration</a>. For now, we accept this basic
configuration, because we do not need any further settings.</p>
</blockquote>
<p>The most important section in the tenant-yaml is the <code>providers</code> section. In this first configuration <code>this.auth</code> is set
to false, because no user should be able to log in yet.</p>
<p>At first, we want to leave the user data in the application database. To connect the uitsmijter tenant with the database
we have to write the first microservice that acts as a proxy.</p>
<blockquote>
<p>Be sure that your database credentials of the ToDo-Application is stored in a configmap or a secret. If the
application is already running on Kubernetes this is mostly the case.
We will use the same configmap or secret to configure the proxy-service to the user database.</p>
</blockquote>
<p>At this point there are two options how a user database could be configured:</p>
<ul>
<li>An Api-Route in the existing Application to verify user credentials</li>
<li><strong>An extra proxy-service to the database table</strong></li>
</ul>
<p>You should always consider using option two! This is because we want to be able to composite our services more and if we
build the route to our existing legacy application we will never be able to pull things out in the future.</p>
<p>The next chapter describes the proxy service in detail, but first lets configure a uitsmijter tenant.
We do not need a Client for the interceptor mode, yet.</p>
<p>The Tenant for the ToDo application:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;uitsmijter.io/v1&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Tenant</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Tasks</span><span class="w">
</span><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">todo-application</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">todo.example.com</span><span class="w">
</span><span class="w">  </span><span class="nt">interceptor</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">domain</span><span class="p">:</span><span class="w"> </span><span class="l">todo.example.com</span><span class="w">
</span><span class="w">    </span><span class="nt">cookie</span><span class="p">:</span><span class="w"> </span><span class="l">.example.com</span><span class="w">
</span><span class="w">  </span><span class="nt">providers</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="p">|</span><span class="sd">
</span><span class="sd">      class UserLoginProvider {
</span><span class="sd">        isLoggedIn = false;
</span><span class="sd">        profile = {};
</span><span class="sd">        role = null;
</span><span class="sd">        constructor(credentials) {
</span><span class="sd">          fetch(`http://checkcredentials.todo-application.svc/validate-login`, {
</span><span class="sd">            method: &#34;post&#34;,
</span><span class="sd">            body: { username: credentials.username, passwordHash: credentials.password }
</span><span class="sd">          }).then((result) =&gt; {
</span><span class="sd">            var subject = {};
</span><span class="sd">            this.profile = JSON.parse(result.body);
</span><span class="sd">            if (result.code == 200) {
</span><span class="sd">              this.isLoggedIn = true;
</span><span class="sd">              this.role = profile.role;
</span><span class="sd">              subject = {subject: this.profile.userId};
</span><span class="sd">            }
</span><span class="sd">            commit(result.code, subject);
</span><span class="sd">          });
</span><span class="sd">        }
</span><span class="sd">        get canLogin() { return this.isLoggedIn; }
</span><span class="sd">        get userProfile() { return this.profile; }
</span><span class="sd">        get role() { return this.role; }
</span><span class="sd">      }</span><span class="w">      
</span><span class="w">    </span>- <span class="p">|</span><span class="sd">
</span><span class="sd">      class UserValidationProvider {
</span><span class="sd">        isValid = false;
</span><span class="sd">        constructor(args) {
</span><span class="sd">          fetch(`checkcredentials.todo-application.svc/validate-user`, {
</span><span class="sd">            method: &#34;post&#34;,
</span><span class="sd">            body: {
</span><span class="sd">              username: args.username,
</span><span class="sd">            }
</span><span class="sd">          }).then((result) =&gt; {
</span><span class="sd">            response = JSON.parse(result.body);
</span><span class="sd">            if (result.code == 200 &amp;&amp; response.isDeleted === false) {
</span><span class="sd">              this.isValid = true;
</span><span class="sd">            }
</span><span class="sd">            commit(this.isValid);
</span><span class="sd">          });
</span><span class="sd">        }
</span><span class="sd">        get isValid() {
</span><span class="sd">          return this.isValid;
</span><span class="sd">        }
</span><span class="sd">      }</span><span class="w">      
</span></code></pre></div><p>The little ECMA-Scripts in the tenant providers do the following:</p>
<ul>
<li>
<p><code>http://checkcredentials.todo-application.svc/validate-login</code> is called with <code>username</code> and the
user password. See hashing options on the <a
  class="gdoc-markdown__link"
  href="/providers/providers"
>providers page</a>. this would than look like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="nx">fetch</span><span class="p">(</span><span class="sb">`http://checkcredentials.todo-application.svc/validate-login`</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s2">&#34;post&#34;</span><span class="p">,</span>
    <span class="nx">body</span><span class="o">:</span> <span class="p">{</span> <span class="nx">username</span>: <span class="kt">credentials.username</span><span class="p">,</span> <span class="nx">passwordHash</span>: <span class="kt">sha256</span><span class="p">(</span><span class="nx">credentials</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span> <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></li>
<li>
<p>If the HTTP status code is <code>OK</code>, than the user is logged in.</p>
</li>
<li>
<p>The returned object is treated as the users <code>profile</code> that includes a <code>role</code> and a <code>userId</code>.</p>
</li>
</ul>
<p>The <code>userId</code> is important and have to be unique for all users. The <code>userId</code> is the main handle to identify the user. In
the case of this demo application it must be the user-id from the database! We do have the flexibility to extend this
later on, but for now the best use case is to stick to the primary key from the legacy database.</p>
<p><strong>There is a problem in <code>UserLoginProvider</code></strong>: the password is not hashed! This is because the ToDo application stores
the passwords in Bcrypt. There is no Bcrypt hashing available in uitsmijter yet (<em>Checkout the roadmap for further
information</em>). But even when Bcrypt is available, we can not hash the password here, because Bcrypt&rsquo;ed passwords can not
be compared with each other like sha265-hashes. This is because Bcrypt uses a unique salt for each password hash, so
even if two users have the same password, their Bcrypt hashes will be different due to the different salts. This makes
it impossible to compare them directly. Bcrypt also incorporates a work factor, which is a parameter that determines how
computationally intensive the hashing process is. This work factor can be adjusted, and it&rsquo;s typically set high to make
it time-consuming and resource-intensive for attackers to compute hash values. As a result, hashing the same password
multiple times will yield different results because the salt and work factor are different.</p>
<p>The proxy service must receive the plaintext password and match it with the Bcrypt hash in the database.</p>
<blockquote>
<p>For security reasons, make sure that you never expose the proxy service to the outside world. Make sure you have
encrypted internal connections in Kubernetes.</p>
</blockquote>
<p>That&rsquo;s all Uitsmijter needs to work properly and provide a login mechanism for the ToDo application.</p>
<p><em>But wait&hellip;</em> A service called <code>checkcredentials</code> needs to be created to act between Uitsmijter and the Users table.</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="checkcredentials-proxy-service">
        checkcredentials Proxy Service
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#checkcredentials-proxy-service" class="gdoc-page__anchor clip flex align-center" title="Anchor to: checkcredentials Proxy Service" aria-label="Anchor to: checkcredentials Proxy Service" href="#checkcredentials-proxy-service">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>In this <a
  class="gdoc-markdown__link"
  href="https://github.com/uitsmijter/example-checkcredentials-typescript-proxyservice/"
>GitHub-Repository</a> is a very simple example written in TypeScript upon
the <a
  class="gdoc-markdown__link"
  href="https://koajs.com"
>Koa-Framework</a>. Let&rsquo;s walk through the functions:</p>
<p>A Credentials interface accepts the request from the <code>fetch</code> method of the tenant provider.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">Credentials</span> <span class="p">{</span>
    <span class="nx">username</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">password?</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>Two routes are used by provider scripts: <code>validate-login</code> to check the user credentials and <code>validate-user</code> to check
if the user is still valid.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/validate-login&#39;</span><span class="p">,</span> <span class="nx">validateLoginController</span><span class="p">);</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/validate-user&#39;</span><span class="p">,</span> <span class="nx">validateUserController</span><span class="p">);</span>
</code></pre></div><p><code>validate-user</code> is straight forward and just checks if the user is still present in the database:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">validateUserController</span>: <span class="kt">Middleware</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">body</span>: <span class="kt">Credentials</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span> <span class="kr">as</span> <span class="nx">Credentials</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="k">throw</span><span class="p">(</span><span class="nx">StatusCodes</span><span class="p">.</span><span class="nx">NOT_ACCEPTABLE</span><span class="p">,</span> <span class="s1">&#39;missing username&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kr">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">prisma</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">findFirst</span><span class="p">({</span>
        <span class="nx">where</span><span class="o">:</span> <span class="p">{</span><span class="nx">email</span>: <span class="kt">body.username</span><span class="p">},</span>
    <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">StatusCodes</span><span class="p">.</span><span class="nx">OK</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">ctx</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">StatusCodes</span><span class="p">.</span><span class="nx">NOT_FOUND</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div><p>If the user is present the funttion returns a status code <code>200</code>, if not than a <code>404</code> is returned.</p>
<p>In the <code>validate-login</code> function the password must be compared with the received password:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">validateLoginController</span>: <span class="kt">Middleware</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">body</span>: <span class="kt">Credentials</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span> <span class="kr">as</span> <span class="nx">Credentials</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span>
        <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">password</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">password</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="k">throw</span><span class="p">(</span><span class="nx">StatusCodes</span><span class="p">.</span><span class="nx">NOT_ACCEPTABLE</span><span class="p">,</span> <span class="s1">&#39;missing credentials&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kr">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">prisma</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">findFirst</span><span class="p">({</span>
        <span class="nx">where</span><span class="o">:</span> <span class="p">{</span><span class="nx">email</span>: <span class="kt">body.username</span><span class="p">},</span>
    <span class="p">});</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">valid</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">compare</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">password</span><span class="o">!</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">valid</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">ctx</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
                <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span>
                    <span class="nx">user</span><span class="p">,</span>
                    <span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;bigint&#39;</span> <span class="o">?</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">:</span> <span class="nx">value</span><span class="p">),</span>
                <span class="p">),</span>
            <span class="p">);</span>
            <span class="nx">ctx</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">StatusCodes</span><span class="p">.</span><span class="nx">OK</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">StatusCodes</span><span class="p">.</span><span class="nx">UNAUTHORIZED</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">StatusCodes</span><span class="p">.</span><span class="nx">NOT_FOUND</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div><p><code>compare(body.password!, user.password);</code> comes from <a
  class="gdoc-markdown__link"
  href="https://www.npmjs.com/package/bcrypt"
>Bcrypt library</a>.</p>
<p>Enough coding. To access the service inside Kubernetes a service must be applied:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Service</span><span class="w">
</span><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">checkcredentials</span><span class="w">
</span><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">todo-application</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">checkcredentials</span><span class="w">
</span><span class="w">  </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span><span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="m">3000</span><span class="w">
</span></code></pre></div><p>When this application is deployed to Kubernetes the service is accessible internally
via <code>http://&lt;service&gt;.&lt;namespace&gt;.svc</code> = <code>checkcredentials.todo-application.svc</code>.</p>
<blockquote>
<p><strong>Warning</strong>
Do not create an ingress to this service. This should be accessible privately inside the cluster, only!</p>
</blockquote>
<p>This tutorial assumes that you are familiar
with <a
  class="gdoc-markdown__link"
  href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/"
>Kubernetes Deployments</a> and you are able to
deploy an application.
See <a
  class="gdoc-markdown__link"
  href="https://github.com/uitsmijter/example-todo-php-application/tree/uitsmijter-backend/deployment"
>this repository</a> to get an example you can use.</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="changes-that-need-to-be-made">
        Changes that need to be made
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#changes-that-need-to-be-made" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Changes that need to be made" aria-label="Anchor to: Changes that need to be made" href="#changes-that-need-to-be-made">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>Back to the PHP ToDo application, the user authentication needs to be changed to parse and decode a JWT instead of
checking the user credentials against the database.</p>
<p>To make the migration easier, we will be using <a
  class="gdoc-markdown__link--code"
  href="https://github.com/PHP-Open-Source-Saver/jwt-auth"
><code>php-open-source-saver/jwt-auth</code></a>
to handle the JWT parsing.</p>
<p>First we have to extend the <code>web</code> middleware group in <code>app/Http/Kernel.php</code> to contain <code>'jwt.auth'</code>  so that the JWT will be interpretet on every request.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">protected</span> <span class="nv">$middlewareGroups</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;web&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;jwt.auth&#39;</span><span class="p">,</span>
        <span class="nx">\App\Http\Middleware\EncryptCookies</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
        <span class="c1">// [...]
</span><span class="c1"></span>    <span class="p">],</span>
    <span class="c1">// [...]
</span><span class="c1"></span><span class="p">];</span>
</code></pre></div><p>Then we need a <code>JWTAuthProvider</code> which handles the user management by loading the existing user when it exists.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">JWTAuthProvider</span> <span class="k">extends</span> <span class="nx">JWTAuthIlluminate</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @param mixed $id
</span><span class="sd">     * @return bool
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">byId</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="sd">/** @var  $user */</span>
        <span class="nv">$user</span> <span class="o">=</span> <span class="nx">User</span><span class="o">::</span><span class="na">whereEmail</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$user</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// Log in the user for the request
</span><span class="c1"></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">auth</span><span class="o">-&gt;</span><span class="na">setUser</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span>

        <span class="c1">// User is authorized
</span><span class="c1"></span>        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>To further prepare the application for the time when the available users are managed by another micro service completely,
we can extend it to create users on the fly when they don&rsquo;t exist yet.
For that we extend the previously implemented user check to create a user in the application database
instead of returning false which would abort the request:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$user</span><span class="p">)</span> <span class="p">{</span>
    <span class="sd">/** @var JWTAuth $auth */</span>
    <span class="nv">$auth</span> <span class="o">=</span> <span class="nx">app</span><span class="p">(</span><span class="s1">&#39;tymon.jwt.auth&#39;</span><span class="p">);</span>

    <span class="c1">// Load payload data
</span><span class="c1"></span>    <span class="nv">$payload</span> <span class="o">=</span> <span class="nv">$auth</span><span class="o">-&gt;</span><span class="na">getPayload</span><span class="p">();</span>

    <span class="c1">// Create user
</span><span class="c1"></span>    <span class="p">(</span><span class="k">new</span> <span class="nx">User</span><span class="p">([</span>
        <span class="s1">&#39;email&#39;</span>    <span class="o">=&gt;</span> <span class="nv">$payload</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;sub&#39;</span><span class="p">),</span>
        <span class="s1">&#39;name&#39;</span>     <span class="o">=&gt;</span> <span class="nv">$payload</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;profile&#39;</span><span class="p">)[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
    <span class="p">]))</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

    <span class="c1">// Load created users data
</span><span class="c1"></span>    <span class="nv">$user</span> <span class="o">=</span> <span class="nx">User</span><span class="o">::</span><span class="na">whereEmail</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><p>This auth provider can now be configured in <code>config/jwt.php</code> (which can be generated by running
<code>php artisan vendor:publish --provider=&quot;PHPOpenSourceSaver\JWTAuth\Providers\LaravelServiceProvider&quot;</code>)
by overwriting the <code>providers.auth</code> setting:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="s1">&#39;providers&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="c1">// [...]
</span><span class="c1"></span>    <span class="s1">&#39;auth&#39;</span> <span class="o">=&gt;</span> <span class="nx">App\Http\Helpers\JWTAuthProvider</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
    <span class="c1">// [...]
</span><span class="c1"></span><span class="p">],</span>
</code></pre></div><p>It needes the <code>JWT_SECRET</code> configured in the environment (which is Uitsmijters <code>jwtSecret</code> shared secret),
for example in the projects <code>.env</code> file.</p>
<p>To support logout, the <code>AuthenticatedSessionController::destroy</code> method must be extended to use the <code>jwt</code> auth guard
and redirect to the Uitsmijter servers <code>/logout</code> endpoint with the right <code>client_id</code>  to properly end the session there.</p>
<p>That guard has to be configured in <code>config/auth.php</code> by extending the <code>guards</code> list:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="s1">&#39;guards&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="c1">// [...]
</span><span class="c1"></span>    <span class="s1">&#39;jwt&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;driver&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;jwt&#39;</span><span class="p">,</span>
        <span class="s1">&#39;provider&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">],</span>
</code></pre></div><p>To make the user data rertrieval a bit easier, we should also change the users primary key to its e-mail address
by setting <code>protected $primaryKey = 'email';</code> and implementing the <code>JWTSubject</code> interface which can be done by adding the following methods:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">public</span> <span class="k">function</span> <span class="nf">getJWTIdentifier</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;email&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">getJWTCustomClaims</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
<span class="p">}</span>
</code></pre></div><p>This has the side-effect that queries which previously implicitly detect the reference keys must be explicitly set to <code>users.id</code>.
In this case that can be done by updating the <code>Todo</code> models <code>user()</code> method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="nx">User</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">);</span>
</code></pre></div><p>Last, when the application is deployed using Kubernetes, its Ingress must be extended to manage the user authentication by adding the annotation
<code>traefik.ingress.kubernetes.io/router.middlewares: uitsmijter-forward-auth@kubernetescrd</code>
where <code>uitsmijter</code> is the namespace of Uitsmijter and <code>forward-auth</code> the middleware name to forward the authentication handling.</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="you-have-made-it">
        You have made it
        <a data-clipboard-text="https://docs.uitsmijter.io/interceptor/migrating_monolith/#you-have-made-it" class="gdoc-page__anchor clip flex align-center" title="Anchor to: You have made it" aria-label="Anchor to: You have made it" href="#you-have-made-it">
            <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div>
<p>Congratulations! A monolithic application with its own login has been transformed into an OAuth application.
Now you can use the same OAuth sessions for other clients and start pulling out features or attaching new features as microservices.</p>

  </article>



          <div class="gdoc-page__footer flex flex-wrap justify-between">
            








  
  

  







          </div>
        </div>
      </main>

      <footer class="gdoc-footer">
  <nav class="container flex">
    <div>
      <section class="flex flex-wrap align-center">
        <span class="gdoc-footer__item gdoc-footer__item--row">
          <a href="https://uitsmijter.io" class="gdoc-footer__link">Uitsmijter.io</a> is a product of  <a href="https://www.ausdertechnik.de" class="gdoc-footer__link">aus der Technik - Simon & Simon GbR</a>

        </span>
        
        
      </section>
      
    </div>
    
      <div class="flex flex-25 justify-end">
        <span class="gdoc-footer__item text-right">
          <a class="gdoc-footer__link fake-link" href="#" aria-label="Back to top">
            <svg class="gdoc-icon gdoc_keyboard_arrow_up">
              <use xlink:href="#gdoc_keyboard_arrow_up"></use>
            </svg>
            <span class="hidden-mobile">Back to top</span>
          </a>
        </span>
      </div>
    
  </nav>
</footer>

    </div>

    
  <script defer src="/js/search-5a80054d.bundle.min.js"></script>

  </body>
</html>
